% By Luc Fabresse, 2015
% fork of MoocLab Inria beamer style
\mode<presentation>


\definecolor{PharoPhoto-blue}{RGB}{36,53,73}

% =========================
% Title page
% =========================

\defbeamertemplate*{title page}{MoocLab}[1][]
{

% version: logos on the right
% \begin{textblock*}{0px}(\paperwidth-4.5cm,0.6cm)%
% \begin{minipage}{5cm}
% \centering
% \includegraphics[height=28px]{pharoLogo}\\
% \includegraphics[height=32px]{inriaLogo}\\
% \includegraphics[height=30px]{univLilleLogo}\\
% \includegraphics[height=45px]{minesDouaiLogo}
% \end{minipage}
% \end{textblock*}%

% larger version
% \begin{textblock*}{0px}(\paperwidth-3.6cm,0cm)%
% \includegraphics[height=\paperheight]{pharoPhoto2}
% \end{textblock*}%

\begin{textblock*}{0px}(\paperwidth-4cm,0cm)%
\includegraphics[height=\paperheight]{pharoPhoto}
\end{textblock*}%

	% \begin{textblock*}{0px}(\paperwidth-2cm,0.4cm)%
	% \includegraphics[height=19px]{pharoLogo}
	% \end{textblock*}%

    \bigskip
	 \bigskip
\begin{minipage}{\paperwidth-5cm}
	\raggedright
	\hyphenpenalty=10000
  \usebeamerfont{title}\usebeamercolor[fg]{title}\inserttitle\par
    \bigskip
  
  \usebeamerfont{subtitle}\usebeamercolor[fg]{subtitle}\insertsubtitle\par
  \end{minipage}%
  
  
  \bigskip
  
  % \begin{center}
  \usebeamerfont{author}\usebeamercolor[fg]{author}\insertauthor\par

	% ====
	\bigskip
	\pgfdeclarehorizontalshading{slideidshade}{1em}{%
	color(0cm)=(white);
	color(2cm)=(white!50!Pharo-blue);%
	color(6.5cm)=(white!50!Pharo-blue);%
	color(8.5cm)=(white)}%

	\pgfuseshading{slideidshade}%

	\vspace*{-14px}

	\hspace*{3.8cm}{\scriptsize\color{white}{\@slidesid}}
	% ====	

	% \bigskip
	% \bigskip

	\footnotesize
	\usebeamercolor[fg]{subtitle}
	% {\@slidesid}

	\bigskip
	\bigskip
	
	
%	\hspace*{-0.2cm}\includegraphics[height=40px]{pharoLogo}
	
	\vspace*{-8px}
	\hspace*{-0.1cm}\url{http:/stephane.ducasse.free}
	
	
	% \end{center}
	
% \bigskip
% \bigskip
% 
% \raisebox{2px}{\includegraphics[height=19px]{pharoLogo}}\hskip 3px%
% \includegraphics[height=26px]{inriaLogo}\hskip 2px%
% \raisebox{2px}{\includegraphics[height=24px]{univLilleLogo}}\hskip 3px%
% \raisebox{-3px}{\includegraphics[height=29px]{logo-IMT}}\hskip 4px%
% \raisebox{-5px}{\includegraphics[height=32px]{minesDouaiLogo}}
% \vspace*{-0.6em}
% \begin{center}
% \raisebox{-7px}{\includegraphics[height=40px]{unisciellogo}}\hskip 2em%
% \includegraphics[height=30px]{unitlogo}
% \end{center}
}

% =========================
% Blocks 
% =========================

\setbeamertemplate{blocks}[rounded][shadow=false]              % pour des blocks arrondis
\setbeamercolor{block body alerted}{fg=white,bg=MoocLab-red} 

% =========================
% (sub-)(sub-)Section 
% =========================

% Section and subsections in head/foot
\defbeamertemplate*{section in head/foot}{MoocLab}
{\insertsectionhead}

\defbeamertemplate*{section in head/foot shaded}{MoocLab}[1][50]
{\color{fg!#1!bg}\usebeamertemplate{section in head/foot}}

\defbeamertemplate*{subsection in head/foot}{MoocLab}
{\insertsubsectionhead}

\defbeamertemplate*{subsection in head/foot shaded}{MoocLab}[1][50]
{\color{fg!#1!bg}\usebeamertemplate{subsection in head/foot}}

\defbeamertemplate*{subsubsection in head/foot}{MoocLab}
{\insertsubsubsectionhead}

\defbeamertemplate*{subsubsection in head/foot shaded}{MoocLab}[1][50]
{\color{fg!#1!bg}\usebeamertemplate{subsubsection in head/foot}}

% =========================
% Footline
% =========================

\setbeamertemplate{footline}{
	\tiny

	\pgfdeclarehorizontalshading{leftfootshade}{3.2mm}{%
	color(0pt)=(white!50!Pharo-blue);%
	color(1.52cm)=(white)}%
	  	
	\insertSpaceBeforeBottomLeftFotHandout\pgfuseshading{leftfootshade}%
	
	\vspace*{-5.5mm}
	
\includegraphics[width=5.5mm]{icon-pharo}\hskip -0.1mm\vbox{\color{Pharo-blue}{\textbf\@slidesid}\hskip 1em\color{Pharo-blue}\insertframenumber\hskip 0.6ex/\hskip 0.6ex\inserttotalframenumber\vspace*{0.7mm}}
}

% =========================
% Background
% =========================

\defbeamertemplate*{background canvas}{MoocLab}
{
   \insertSpaceForVideo
 	\insertBorderForHandout
}

% =========================
% Frame title: MoocLab
% =========================

\defbeamertemplate*{frametitle}{MoocLab}[1][left]
{
  \ifbeamercolorempty[bg]{frametitle}{}{\nointerlineskip}%
  \@tempdima=\originaltextwidth%
  \advance\@tempdima by\beamer@leftmargin%
  \advance\@tempdima by\beamer@rightmargin%
  \begin{beamercolorbox}[sep=0.3cm,#1,wd=\the\@tempdima]{frametitle}
    \usebeamerfont{frametitle}%
    \vbox{}\vskip-1ex%
    \if@tempswa\else\csname beamer@fte#1\endcsname\fi%
    \strut\insertframetitle\strut\par%
    {%
      \ifx\insertframesubtitle\@empty%
      \else%
      {\usebeamerfont{framesubtitle}\usebeamercolor[fg]{framesubtitle}\insertframesubtitle\strut\par}%
      \fi
    }%
    \vskip-1ex%
    \if@tempswa\else\vskip-.3cm\fi% set inside beamercolorbox... evil here...
  \end{beamercolorbox}%
}

\def\beamer@fteright{\vskip0.35cm\advance\leftskip by 1.7cm\advance\rightskip by1.7cm}

% Frame title continuations, MoocLab
\defbeamertemplate*{frametitle continuation}{MoocLab}{\insertcontinuationcountroman}

% =========================
% Navigation symbols
% =========================

% \defbeamertemplate*{navigation symbols}{MoocLab}
% {%
%   \hbox{%
%     \hbox{\insertslidenavigationsymbol}
%     \hbox{\insertframenavigationsymbol}
%     \hbox{\insertsubsectionnavigationsymbol}
%     \hbox{\insertsectionnavigationsymbol}
%     \hbox{\insertdocnavigationsymbol}
%     \hbox{\insertbackfindforwardnavigationsymbol}%
%   }%
% }
%
% % No navigation symbols in handout or trans mode:
% \only<handout| trans>{\setbeamertemplate{navigation symbols}{}}

% =========================
% Sidebar
% =========================

% \defbeamertemplate*{sidebar left}{MoocLab}
% {}
%
% \defbeamertemplate*{sidebar right}{MoocLab}
% {
%   \vfill%
%   \llap{\insertlogo\hskip0.1cm}%
%   \vskip2pt%
%   \llap{\usebeamertemplate***{navigation symbols}\hskip0.1cm}%
%   \vskip2pt%
% }
%
% \defbeamertemplate*{sidebar canvas left}{MoocLab}
% {%
%   \ifbeamercolorempty[bg]{sidebar left}{}
%   {\color{bg}\vrule height\sidebarheight width\beamer@leftsidebar}%
% }
%
% \defbeamertemplate*{sidebar canvas right}{MoocLab}
% {%
%   \ifbeamercolorempty[bg]{sidebar right}{}
%   {\color{bg}\vrule height\sidebarheight width\beamer@rightsidebar}%
% }

% =========================
% Notes
% =========================

% \defbeamertemplate*{note page}{MoocLab}
% {%
%   {%
%     \scriptsize
%     \usebeamerfont{note title}\usebeamercolor[fg]{note title}%
%     \ifbeamercolorempty[bg]{note title}{}{%
%       \insertvrule{.25\paperheight}{note title.bg}%
%       \vskip-.25\paperheight%
%       \nointerlineskip%
%     }%
%     \vbox{
%       \hfill\insertslideintonotes{0.25}\hskip-\Gm@rmargin\hskip0pt%
%       \vskip-0.25\paperheight%
%       \nointerlineskip
%       \begin{pgfpicture}{0cm}{0cm}{0cm}{0cm}
%         \begin{pgflowlevelscope}{\pgftransformrotate{90}}
%           {\pgftransformshift{\pgfpoint{-2cm}{0.2cm}}%
%           \pgftext[base,left]{\usebeamerfont{note date}\usebeamercolor[fg]{note date}\the\year-\ifnum\month<10\relax0\fi\the\month-\ifnum\day<10\relax0\fi\the\day}}
%         \end{pgflowlevelscope}
%       \end{pgfpicture}}
%     \nointerlineskip
%     \vbox to .25\paperheight{\vskip0.5em
%       \hbox{\insertshorttitle[width=8cm]}%
%       \setbox\beamer@tempbox=\hbox{\insertsection}%
%       \hbox{\ifdim\wd\beamer@tempbox>1pt{\hskip4pt\raise3pt\hbox{\vrule
%             width0.4pt height7pt\vrule width 9pt
%             height0.4pt}}\hskip1pt\hbox{\begin{minipage}[t]{7.5cm}\def\breakhere{}\insertsection\end{minipage}}\fi%
%       }%
%       \setbox\beamer@tempbox=\hbox{\insertsubsection}%
%       \hbox{\ifdim\wd\beamer@tempbox>1pt{\hskip17.4pt\raise3pt\hbox{\vrule
%             width0.4pt height7pt\vrule width 9pt
%             height0.4pt}}\hskip1pt\hbox{\begin{minipage}[t]{7.5cm}\def\breakhere{}\insertsubsection\end{minipage}}\fi%
%       }%
%       \setbox\beamer@tempbox=\hbox{\insertshortframetitle}%
%       \hbox{\ifdim\wd\beamer@tempbox>1pt{\hskip30.8pt\raise3pt\hbox{\vrule
%             width0.4pt height7pt\vrule width 9pt
%             height0.4pt}}\hskip1pt\hbox{\insertshortframetitle[width=7cm]}\fi%
%       }%
%       \vfil}%
%   }%
%   \ifbeamercolorempty[bg]{note page}{}{%
%     \nointerlineskip%
%     \insertvrule{.75\paperheight}{note page.bg}%
%     \vskip-.75\paperheight%
%   }%
%   \vskip.25em
%   \nointerlineskip
%   \insertnote
% }

\mode<all>
